!function(){"use strict";angular.module("autopoolIoApp",["ngMaterial","ngMessages","firebase","ngRoute"])}(),function(){"use strict";function a(a){return a()}angular.module("autopoolIoApp").factory("Auth",["$firebaseAuth",a])}(),function(){"use strict";function a(a,b){var c=this;c.auth=a,c.auth.$onAuthStateChanged(function(a){c.user=a,console.log("BadgeCtrl:",c.user)}),c.signOut=function(){c.auth.$signOut()},c.goToSettings=function(){b.path("/settings")},c.goToAdminSettings=function(){b.path("/admin")}}angular.module("autopoolIoApp").controller("BadgeCtrl",a),a.$inject=["Auth","$location"]}(),function(){"use strict";function a(a,b){a.$on("$routeChangeError",function(a,c,d,e){"AUTH_REQUIRED"===e&&b.path("/home")})}angular.module("autopoolIoApp").run(["$rootScope","$location",a])}(),function(){function a(a,b,c){a.when("/home",{controller:"HomeCtrl as home",templateUrl:"views/home.html"}).when("/onboard",{controller:"OnboardCtrl as onboard",templateUrl:"views/onboard.html",resolve:{currentAuth:["Auth",function(a){return a.$requireSignIn()}]}}).when("/group",{controller:"GroupCtrl as group",templateUrl:"views/group.html",resolve:{currentAuth:["Auth",function(a){return a.$requireSignIn()}]}}).when("/ride",{controller:"RideCtrl as ride",templateUrl:"views/ride.html",resolve:{currentAuth:["Auth",function(a){return a.$requireSignIn()}]}}).when("/settings",{controller:"SettingsCtrl as settings",templateUrl:"views/settings.html",resolve:{currentAuth:["Auth",function(a){return a.$requireSignIn()}]}}).when("/admin",{controller:"SettingsAdminCtrl as admin",templateUrl:"views/admin.html",resolve:{currentAuth:["Auth",function(a){return a.$requireSignIn()}]}}).otherwise({controller:"HomeCtrl as home",templateUrl:"views/home.html"}),b.html5Mode(!0),c.theme("default").primaryPalette("teal").accentPalette("light-green").warnPalette("deep-orange")}angular.module("autopoolIoApp").config(["$routeProvider","$locationProvider","$mdThemingProvider",a])}(),function(){"use strict";function a(a,b){var c={};return c.saveNewUser=function(b,c,d,e,f){var g=firebase.database().ref(),h=g.child("users").child(b),i=a(h);return i.displayName=c,i.googleEmail=d,i.photoURL=e,i.googleUid=f,i.startPoint=null,i.endPoint=null,i.contactEmail=null,i.phoneNumber=null,i.phoneType=null,i.role={type:null,distances:null},i.latLong=null,i.createDate=firebase.database.ServerValue.TIMESTAMP,i.modDate=firebase.database.ServerValue.TIMESTAMP,i.isAdmin=!1,i.isAuth=!1,i.$save().then(function(){console.log("New user saved:",i.displayName,i.$id)}).catch(function(a){console.error("Error:",a)}),i},c.getUser=function(b){var c=firebase.database().ref().child("users");return a(c.child(b))},c}angular.module("autopoolIoApp").factory("Data",["$firebaseObject","$firebaseArray",a])}(),function(){"use strict";var a={apiKey:"AIzaSyBqyaR4kQ_yVKDp7aXe0WcOfbMw4BHQLb8",authDomain:"autopool-io.firebaseapp.com",databaseURL:"https://autopool-io.firebaseio.com",storageBucket:"autopool-io.appspot.com"};firebase.initializeApp(a)}(),function(){"use strict";function a(a,b,c,d){var e=this;b.$onAuthStateChanged(function(a){a&&c.path("/onboard")}),e.loginUser=function(){e.message=null,e.error=null,b.$signInWithPopup("google").then(function(a){e.something=d.getUser(a.user.uid),e.something.$loaded().then(function(b){b.displayName?console.log("user exists!"):(console.log("user does not exist!"),d.saveNewUser(a.user.uid,a.user.displayName,a.user.email,a.user.photoURL,a.user.providerData[0].uid))}),c.path("/onboard")}).catch(function(a){console.log("Authentication failed:",a)})}}angular.module("autopoolIoApp").controller("HomeCtrl",a),a.$inject=["$http","Auth","$location","Data"]}(),function(){"use strict";function a(){function a(a,b,c){b.setPosition(c),b.setContent(a?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}var b=new google.maps.Map(document.getElementById("map"),{center:{lat:44.9778,lng:-93.265},zoom:10,disableDefaultUI:!0,styles:[{featureType:"road",elementType:"geometry",stylers:[{color:"#558B2F"}]},{featureType:"road",elementType:"labels",stylers:[{saturation:-100}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0D47A1"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"all",stylers:[{saturation:-50}]}]});navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){var c={lat:a.coords.latitude,lng:a.coords.longitude};b.setCenter(c)},function(){a(!0,infoWindow,b.getCenter())}):a(!1,infoWindow,b.getCenter())}angular.module("autopoolIoApp").controller("MapCtrl",a)}(),function(){"use strict";function a(a,b,c,d){var e=this;e.displayName=b.displayName,e.photoURL=b.photoURL,e.email=b.email,console.log("Signed in as:",e.displayName,e.email),console.log("Full user object:",b),c.$onAuthStateChanged(function(a){a||d.path("/home")})}angular.module("autopoolIoApp").controller("OnboardCtrl",a),a.$inject=["$http","currentAuth","Auth","$location"]}(),function(){"use strict";angular.module("autopoolIoApp").controller("SettingsAdminCtrl",function(){console.log("Hi!")})}(),function(){"use strict";angular.module("autopoolIoApp").controller("SettingsCtrl",function(){console.log("Hi!")})}();